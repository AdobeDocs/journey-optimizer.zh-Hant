---
solution: Journey Optimizer
title: 使用外部資料來源和自訂動作限制輸送量
description: 使用外部資料來源和自訂動作限制輸送量
feature: Journeys
topic: Content Management
role: User, Developer
level: Experienced
keywords: 歷程，資料來源，限制，輸送量，自訂，動作
exl-id: 45d6bb82-88ea-4510-a023-a75a82cc6f7b
source-git-commit: 72bd00dedb943604b2fa85f7173cd967c3cbe5c4
workflow-type: tm+mt
source-wordcount: '644'
ht-degree: 3%

---

# 使用案例：透過外部資料來源和自訂動作限制輸送量{#limit-throughput}

## 使用案例的說明

Adobe Journey Optimizer可讓從業人員透過使用自訂動作和資料來源，將API呼叫傳送至外部系統。

您可以透過完成此操作：

* **資料來源**：從外部系統收集資訊，並將其用於歷程情境中，例如取得設定檔城市的天氣資訊，並根據此建立專屬的歷程流程。

* **自訂動作**：傳送資訊給外部系統，例如透過使用Journey Optimizer協調功能的外部解決方案傳送電子郵件，以及設定檔資訊、對象資料和歷程內容。

如果您使用外部資料來源或自訂動作，您可以透過限制歷程輸送量來保護外部系統：單一歷程每秒最多5000個例項，受眾觸發的歷程每秒最多20000個例項。

對於自訂動作，可在產品層級使用節流功能。 請參閱此 [頁面](../configuration/external-systems.md#capping).

對於外部資料來源，您可以在端點層級定義上限，以避免透過Journey Optimizer的上限API淹沒這些外部系統。 不過，達到限制後仍會捨棄所有請求。 在本節中，您將找到可用來最佳化輸送量的解決方法。

有關如何與外部系統整合的詳細資訊，請參閱此 [頁面](../configuration/external-systems.md).

## 實作

對象 **受眾觸發的歷程**，您可以定義將影響歷程輸送量的讀取對象活動的節流率。  [閱讀全文](../building-journeys/read-audience.md)

![](assets/limit-throughput-1.png)

您可以將此值從每秒500個例項修改為每秒20,000個例項。 如果您需要低於500/s，您還可以新增包含等待活動的「百分比分割」條件，以將您的歷程分割成多個分支，並在特定時間執行這些分支。

![](assets/limit-throughput-2.png)

以為例 **受眾觸發的歷程** 使用母體 **10,000個設定檔** 以及傳送資料至支援的外部系統 **每秒100個要求**.

1. 您可以以500個設定檔/秒的輸送量定義讀取對象以讀取設定檔，這表示讀取所有設定檔將需要20秒。 在第二個1中，您將閱讀其中500篇，在第二個2 500多篇，以此類推。

1. 然後，您可以新增「百分比分割」條件活動，並以20%分割，以便每秒在每個分支中具有100個設定檔。

1. 之後，使用每個分支中的特定計時器新增「等待」活動。 在此處，我們設定每個專案要等待30秒。 每秒，每個分支中都會有100個設定檔。

   * 在分支1上，它們將等待30秒，這表示：
      * 在第二個1,100個設定檔將等待第二個31
      * 在第二個2,100個設定檔將等待第二個32個等等。

   * 在分支2上，它們將等待60秒，這表示：
      * 在第二個1,100個設定檔將等待第二個61 (1&#39;01&quot;)
      * 在第二個2,100個設定檔將等待第二個62 （1英尺2英吋）等。

   * 知道我們預期讀取所有設定檔的時間長度上限為20秒，每個分支之間將不會重疊，第二20秒是設定檔將流入條件的最後一個分支。 在第二個31和第二個51之間，將處理分支1中的所有設定檔。 在第二個61 （1英尺1英吋）和第二個81 （1英尺21英吋）之間，將處理分支2中的所有設定檔等。

   * 作為護欄，您還可以新增第六個分支，使每個分支少於100個設定檔，尤其是如果您的外部系統僅支援100個請求/秒。

>[!IMPORTANT]
>
>和任何因應措施一樣，請在進入生產環境前徹底測試該解決方案，以確保它符合您的需求。

作為額外的護欄，您也可以使用「上限」功能。

>[!NOTE]
>
>與藉由對沙箱的所有歷程全域保護端點的上限功能不同，此因應措施僅適用於歷程層級。 這表示如果多個歷程同時執行，且目標為相同的端點，則您需要在設計歷程時將其列入考量。 因此，此因應措施不適用於每個使用案例。
