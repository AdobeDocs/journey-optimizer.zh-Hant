---
solution: Journey Optimizer
title: 使用外部資料來源和自訂動作限制輸送量
description: 使用外部資料來源和自訂動作限制輸送量
feature: Journeys
topic: Content Management
role: User, Developer
level: Experienced
keywords: 旅程，資料源，限制，吞吐量，自定義，操作
exl-id: 45d6bb82-88ea-4510-a023-a75a82cc6f7b
source-git-commit: 4f3d22c9ce3a5b77969a2a04dafbc28b53f95507
workflow-type: tm+mt
source-wordcount: '644'
ht-degree: 3%

---

# 用例：使用外部資料源和自定義操作限制吞吐量{#limit-throughput}

## 用例說明

Adobe Journey Optimizer允許從業人員通過使用自定義操作和資料源向外部系統發送API調用。

這可以通過：

* **資料源**:從外部系統收集資訊並將其用於行程環境中，例如獲取有關城市概況的天氣資訊並根據此制定專用行程流。

* **自定義操作**:將資訊發送到外部系統，例如，通過外部解決方案發送電子郵件，該解決方案使用Journey Optimizer的業務流程功能以及配置檔案資訊、受眾資料和旅程上下文。

如果您使用外部資料源或自定義操作，則可能希望通過限制行程吞吐量來保護外部系統：單次旅行最多5000個實例/秒，分段觸發最多2000個實例/秒。

對於自定義操作，在產品級別提供限制功能。 請參閱此 [頁](../configuration/external-systems.md#capping)。

對於外部資料源，您可以在端點級別定義封頂限制，以避免通過Journey Optimizer的封頂API壓垮那些外部系統。 但是，在達到限制後將丟棄所有剩餘的請求。 在本節中，您將找到可用於優化吞吐量的變通辦法。

有關如何與外部系統整合的詳細資訊，請參閱 [頁](../configuration/external-systems.md)。

## 實作

對於 **分段觸發的行程**，您可以定義將影響行程吞吐量的「讀段」活動的限制速率。  [閱讀全文](../building-journeys/read-segment.md)

![](assets/limit-throughput-1.png)

您可以將此值從每秒500個實例修改為每秒20 000個實例。 如果需要低於500/s，您還可以添加「百分比分解」條件，並執行等待活動，以將行程分解為多個分支，並在特定時間執行這些條件。

![](assets/limit-throughput-2.png)

讓我們舉一個例子 **分段觸發的行程** 與一群 **10 000個配置檔案** 向外部系統發送資料 **每秒100次請求**。

1. 您可以定義讀取段以讀取吞吐量為500個配置式/秒的配置式，這意味著讀取所有配置式需要20秒。 在第二個1，你將閱讀500個，第二個2,500個，等等。

1. 然後，可以添加「百分比拆分」條件活動，其中20%的拆分將在每個分支中每秒具有100個配置檔案。

1. 之後，在每個分支中添加具有特定計時器的等待活動。 這裡我們設定了30秒的等待。 每秒都會有100個檔案流入每個分支。

   * 在分支1上，他們將等待30秒，這意味著：
      * 在第二個1上，100個配置檔案將等待第二個31
      * 在第二個2上，100個配置檔案將等待第二個32等。
   * 在分支2上，他們將等待60秒，這意味著：
      * 在第二個1中，100個配置檔案將等待第二個61(1&#39;01&quot;)
      * 在第二個2中，100個配置檔案將等待第二個62(1&#39;02&quot;)等。
   * 我們知道讀取所有配置檔案最多需要20秒，因此每個分支之間將不會重疊，第二個20是配置檔案流入條件的最後一個分支。 在第231和第251之間，將處理分支1中的所有配置檔案。 在第二個61(1』01」)和第二個81(1』21」)之間，將處理分支2中的所有配置檔案等。

   * 作為保護欄，您還可以添加第六個分支，使每個分支的配置檔案少於100個，尤其是如果外部系統僅支援100個請求/秒。



>[!IMPORTANT]
>
>與任何變通方法一樣，請在投入生產前徹底test該解決方案，以確保它符合您的需要。

作為附加的護欄，您還可以使用「封閉」功能。

>[!NOTE]
>
>與封頂功能不同，此變通方法僅在行程級別工作。 這意味著，如果多個行程並行運行，並針對同一端點，則在設計行程時需要考慮這一點。 因此，此解決方法不適用於每個使用案例。
